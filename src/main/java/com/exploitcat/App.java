package com.exploitcat;


import com.fasterxml.jackson.databind.ObjectMapper;

import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;
import com.fasterxml.jackson.annotation.JsonTypeInfo;


public class App {

    private static  byte [] inputStreamToByte(InputStream is) throws IOException {
        ByteArrayOutputStream bAOutputStream = new ByteArrayOutputStream();
        int ch;
        while((ch = is.read() ) != -1){
            bAOutputStream.write(ch);
        }
        byte data [] =bAOutputStream.toByteArray();
        bAOutputStream.close();
        return data;
    }

    public static void main( String[] args ) throws Exception{
        ObjectMapper om = new ObjectMapper();
        om.enableDefaultTyping(ObjectMapper.DefaultTyping.JAVA_LANG_OBJECT, JsonTypeInfo.As.PROPERTY);
        // InputStream is = App.class.getResourceAsStream("test-jackson.json") ;
        // InputStream is = App.class.getResourceAsStream("test-jackson2.json") ;
        InputStream is = App.class.getResourceAsStream("test-jackson3.json") ;

        om.readValue(App.inputStreamToByte(is), Object.class) ;
    }
}


class Bean {
    public int id;
    public Object obj;
}
